#  代码规范 #

*如果引用此文请提供原文出处。*

上一篇文章我们谈到了Commit Message 日志规范，确定该规范能让管理者清楚的掌握代码仓库的变更情况，通过Commit Message 日志可以掌握功能的上线情况，这是项目质量管理的基石。项目质量管理的栋梁是什么？应该就是代码规范了吧，只有有了代码规范准则，码农们才能码出高质量、高标准的砖。

谈到代码规范就不得不说去年2月由阿里同学发布的[《阿里巴巴Java开发手册》](https://github.com/alibaba/p3c/blob/master/%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Java%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%EF%BC%88%E7%BA%AA%E5%BF%B5%E7%89%88%EF%BC%89.pdf "《阿里巴巴Java开发手册》")一书，截止今天已更新到1.3.1版本了，作为软件行业从业者，真正的需要感谢阿里的这种开源共享精神，如果没有读过此书的同学可以花点时间阅读一下。

为了更好的践行阿里代码规范，他们提供了Eclipse和Idea的插件--“Alibaba Java Coding Guidelines”，团队成员如果在提交代码之前运行该插件，将极大的提高代码质量和风格的统一，同时也给CR的同学减负，让CR的同学更多的关注代码的设计问题和性能问题。

诚然，之前在阿里也是践行该准则在编写代码，书中工程结构一节与内部有些出入的地方，也许是不同团队的差异。进入创业公司以来也一直在倡导这种规范，依靠依稀的记忆中残留的规范碎片在推广，现如今好了，阿里终于开源了这一规范，在项目代码管理上就有法可依了。

在遵循阿里代码规范的前题下，根据我的工作经验和项目中存在的问题，追加了如下代码规范，如有不妥，欢迎拍砖。

**1、采用lombok注解，使POJO更简洁、清爽、易读。**

**2、与数据库映射的POJO对象不允许对Getter/Setter方法做修改，不允许添加没有与数据库映射的属性。**

**3、关联查询查询必须有与之映射的POJO对象，同样视作为数据库映射的POJO对象。**

**4、关联查询不应超过3张表，关联方法应该放在主表对应的DAO接口中。**

**5、DAO层方法必须以select、update、insert、delete为前缀。Service层的方法可以参考阿里的规范命名。**

**6、Service层只能注入对应的DAO，需要查询其他DAO应该注入其Service。**

**7、出参和入参必须是枚举类的name，项目中其他引用也必须是枚举，而非数字类型或字符串类型。**

**8、对业务复杂的模板，可多做读写区分，如 xxxxQueryController/xxxxOperateController。**

**9、远程调用接口出参必须映射成POJO对象，不允许直接返回JSON串，如果涉及到枚举属性，须用枚举类型不允许使用String类型。**

**10、远程调用接口必须打印入参和出参。**

**11、调用第三方中间件所编写的工具类应该以Client为后缀，再注入连接对象才会更合理。譬如 RedisClient 比 RedisUtils 命名更能见文之意且优雅，要在RedisUtils类添加Component注解，类中注入JedisPool是不是觉得别扭。**

**12、util包下的类必须是以Util或者Utils为后缀，且方法必须都是static方法，构造方法也必须私有化。**

**13、如果方法出参对象可能为空，应该添加@Nullable注解或者方法名以Nullable为后缀，不推荐通过Optional包装，因为使用者还是需要遵守语法糖进行判断，那跟写If语句又有什么区别。**

**14、命名必须用词准确，完整表达方法、属性的含义，不允许跨界造成含义模糊（比如delete来表达status的含义），统一概念必须使用相同命名（比如司机的英文是Driver，用Carrier来表达司机的意思是什么鬼）。**

**15、每个方法都必须添加注释无论简单或者复杂，有同学觉得简单的方法不需要写注释，到最后就没有人写注释了。严禁出现方法不写注释看不懂的情况，更不能接受写了注释更看不懂的情况。**

**16、如果一个对象只有一个属性，应该考虑是否有必要，是不是过度设计了。**

**17、在项目中引入的新的技术栈需要团队成员都知晓，引入后必须都统一使用，严禁出现一些同学使用，一些同学不使用的情况。比如lombok注解**

参考文献：

《阿里巴巴Java开发手册》

《代码整洁之道》

联系方式：

https://github.com/longtian2

**如有用请不吝打赏**

![](https://github.com/longtian2/cc3/blob/master/images/wechat_pay.png)